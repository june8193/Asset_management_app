
## Method

### 시스템 아키텍처

본 앱의 아키텍처는 다음과 같은 주요 구성 요소로 이루어집니다:

1. **클라이언트 애플리케이션 (모바일/웹)**
   - 사용자가 자산 정보를 조회하고 자산 비율을 시각적으로 확인할 수 있는 인터페이스.
   - 주식 정보, 계좌 잔액, 환율 정보를 통합하여 사용자에게 표시.
  
2. **백엔드 서버**
   - **API 게이트웨이**를 통해 여러 금융기관의 계좌 정보와 주식 데이터를 통합하여 제공.
   - **데이터베이스**: 사용자 계좌 정보, 주식 현황, 환율 데이터를 저장하고 관리.
   - **데이터 수집 및 통합 모듈**: 각 금융기관의 API와 외부 주식/환율 API로부터 데이터를 주기적으로 수집.
   - **비율 분석 모듈**: 자산 종류별 비율을 계산하고, 이를 사용자에게 제공.

### 데이터 흐름

1. **계좌 정보 수집**
   - **키움증권 OpenAPI**와 같은 증권사의 API를 통해 계좌 정보를 가져옵니다.
     - 주식 보유 현황 (종목명, 보유 수량, 현재 가격 등)과 예수금 정보를 수집.
   - 기타 증권사 계좌 정보는 KOSCOM 등의 통합 API 서비스를 고려하여 수집할 수 있습니다.

2. **주식 가격 정보 수집**
   - **Alpha Vantage** 또는 **Yahoo Finance** API를 통해 각 주식의 실시간 가격 정보를 가져옵니다.
   - 가져온 가격 정보를 통해 보유 주식의 평가액을 계산합니다.

3. **환율 정보 수집**
   - **ExchangeRate-API**를 사용하여 주요 외환 거래 쌍의 실시간 환율 정보를 수집합니다.
   - 보유 자산 중 외화 자산이 있을 경우, 이를 환율에 따라 변환하여 평가액을 계산합니다.

4. **데이터 통합 및 분석**
   - 백엔드 서버의 데이터베이스에서 각 사용자의 모든 금융 계좌 정보를 통합 관리합니다.
   - 자산 비율 분석 모듈은 주식, 예수금, 채권 등의 자산 비율을 계산하여 클라이언트 애플리케이션에 전달합니다.
   - 자산 비율은 차트 형태로 시각화되어 사용자에게 제공됩니다.

### 데이터베이스 설계

1. **User Table**: 사용자 정보 관리
   - `user_id`: 사용자 고유 ID
   - `username`: 사용자 이름
   - `email`: 사용자 이메일

2. **Account Table**: 계좌 정보 관리
   - `account_id`: 계좌 고유 ID
   - `user_id`: 사용자의 고유 ID (User Table과 연결)
   - `broker_name`: 증권사 이름 (예: 키움증권, 미래에셋)
   - `balance`: 계좌 잔액

3. **Stock Holdings Table**: 보유 주식 정보 관리
   - `holding_id`: 보유 주식 정보 고유 ID
   - `account_id`: 계좌 고유 ID (Account Table과 연결)
   - `stock_symbol`: 주식 심볼 (예: AAPL, 005930)
   - `quantity`: 보유 수량
   - `current_price`: 실시간 주식 가격 (API를 통해 업데이트)
   - `valuation`: 평가액 (quantity * current_price)

4. **Exchange Rates Table**: 환율 정보 관리
   - `rate_id`: 환율 정보 고유 ID
   - `currency_pair`: 통화 쌍 (예: USD/KRW)
   - `rate`: 실시간 환율 (API를 통해 업데이트)

### 데이터 처리 및 주기

1. **실시간 데이터 업데이트**
   - 주식 가격과 환율 정보는 일정 주기로 API를 통해 갱신됩니다 (예: 10분 주기).
   - 계좌 정보는 사용자가 요청할 때마다 최신 데이터를 가져오도록 설정합니다.

2. **데이터 통합**
   - 사용자의 자산 정보를 통합하여 최종 자산 비율을 계산하고 시각화합니다.
   - 데이터베이스는 각 요청마다 최신 정보를 제공하며, 분석 결과를 사용자에게 실시간으로 전달합니다.

